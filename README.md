# Honeypot Matrix - Real-time Cybersecurity Threat Intelligence System

This is a portfolio project showcasing a distributed honeypot system that monitors, analyzes, and visualizes cyber attacks in real-time. The system demonstrates a two-server architecture with a Raspberry Pi running DietPi as the honeypot host and a separate web server for data visualization and analysis.

## Overview

The Honeypot Matrix demonstrates advanced cybersecurity concepts through a distributed architecture designed to capture and analyze malicious network traffic. The system showcases Dionaea honeypot integration, incremental log processing algorithms, and real-time threat visualization techniques.

The application demonstrates the following data processing pipeline:
- Dionaea honeypot captures network attacks on the Raspberry Pi
- Python processor analyzes logs with incremental processing and persistent storage
- Data is transferred via SSH to the web server using automated scripts
- Interactive dashboard provides real-time attack visualization and analysis

> [!NOTE]  
> This project demonstrates production-ready incremental processing techniques to handle continuous data streams without performance degradation.

## Architecture

### Two-Server Infrastructure

**Honeypot Server (Raspberry Pi 3B with DietPi):**
- Runs Dionaea honeypot to capture attacks
- Processes logs using Python scripts
- Generates JSON data files
- Transfers data to web server via SSH
- Operates efficiently on 1GB RAM with optimized resource usage

**Web Server:**
- Receives processed data files
- Hosts interactive web dashboard
- Provides real-time attack visualization
- Serves threat intelligence data

### Data Flow

```
[Attackers] -> [Dionaea Honeypot] -> [Log Processor] -> [SSH Transfer] -> [Web Dashboard]
     |              |                      |               |              |
  Network         Raspberry Pi         Python Script    Data Transfer   Web Server
  Traffic         (DietPi)            (process_dionaea.py)  (rsync)     (HTML/JS)
```

## Features

- Real-time attack monitoring and visualization
- Incremental log processing with persistent storage
- Geographic attack mapping with country-level analysis
- Service-based attack categorization
- Hash-based deduplication to prevent duplicate entries
- Log rotation detection and handling
- Automatic data cleanup to maintain performance
- Interactive web dashboard with attack statistics
- Mobile-responsive design with touch controls
- Continuous data processing every 15 seconds

## Requirements

### Honeypot Server (Raspberry Pi)
- Raspberry Pi 3B (1GB RAM) - demonstrates efficient resource utilization
- DietPi operating system
- Python 3.6 or higher
- Dionaea honeypot software
- SSH client and rsync
- GeoIP2 database (optional)

### Web Server
- Web server (Apache/Nginx)
- Modern web browser with JavaScript support
- SSH server for data reception

> [!WARNING]  
> The honeypot server will attract real malicious traffic. Ensure proper network isolation and security measures are in place.

> [!IMPORTANT]  
> Both servers require proper SSH key authentication for automated data transfer.

## Project Structure

This portfolio project demonstrates a distributed system with code organized across two servers:

### Honeypot Server (Raspberry Pi with DietPi)
```
honeypot-server/
│
├── process_dionaea.py           # Core log processor with incremental processing
├── upload_honey_data.sh         # Automated data processing and transfer script
├── honeypot-processor.service   # Systemd service configuration
│
├── dionaea.cfg                  # Dionaea honeypot configuration
├── dionaea.log                  # Live attack logs (generated by Dionaea)
│
└── data/                        # Generated data files
    ├── persistent_attacks.json      # Long-term attack storage database
    ├── persistent_attacks_backup.json  # Backup attack database
    ├── processed_dionaea.log         # Processing position tracker
    └── processed_hashes.txt          # Hash-based deduplication cache
```

### Web Server
```
web-server/
│
├── index.html                   # Interactive dashboard interface
├── style.css                    # Matrix-themed styling and animations
├── script.js                    # Real-time data visualization and controls
│
└── data/                        # Received data files (via SSH transfer)
    ├── attacks.json                  # Recent attack data for display
    ├── summary.json                  # Aggregated attack statistics
    ├── hourly_stats.json             # Time-based attack distribution
    └── daily_stats.json              # Daily attack patterns
```

### Key Technical Components

**Incremental Processing Engine (process_dionaea.py):**
- Implements hash-based deduplication using MD5 checksums
- Maintains file position tracking for resumable processing
- Detects log rotation and handles persistent storage
- Processes 50,000+ log lines while maintaining performance

**Automation Framework (upload_honey_data.sh):**
- Continuous processing with 15-second intervals
- Error handling and logging mechanisms
- Efficient rsync-based data transfer
- Dependency checking and service management

**Interactive Dashboard (Web Interface):**
- Real-time attack visualization with geographic mapping
- Chart.js integration for statistical analysis
- Matrix-themed responsive design
- WebSocket-ready architecture for live updates

## Technical Demonstration

This project showcases several advanced cybersecurity and software engineering concepts:

### System Architecture
- Distributed processing across isolated network segments
- Automated data pipeline with error handling and recovery
- Service-oriented architecture with systemd integration
- SSH-based secure data transfer between servers

### Honeypot Server Configuration

The Raspberry Pi demonstrates production honeypot deployment:
```bash
# Continuous processing service
./upload_honey_data.sh continuous

# Manual processing for demonstration
python3 process_dionaea.py --verbose --output-dir /tmp/honeypot_data
```

### Web Dashboard Features

The interactive dashboard demonstrates modern web development techniques:

- Real-time attack statistics with animated counters
- Geographic attack visualization with SVG mapping
- Service-based attack analysis with Chart.js integration
- Timeline charts showing attack patterns over time
- Responsive design optimized for mobile devices

> [!NOTE]
> The dashboard is designed to handle live data streams and provides real-time updates as attacks are detected.

## Implementation Details

### Incremental Log Processing

The system implements sophisticated incremental processing to handle continuous log streams:

1. **Position Tracking**: Maintains file position to resume processing after restarts
2. **Hash-based Deduplication**: Uses MD5 hashes to prevent reprocessing identical log lines
3. **Log Rotation Detection**: Automatically detects when Dionaea rotates log files
4. **Persistent Storage**: Maintains attack database independent of log file lifecycle

### Performance Optimization

- **Line Limit Management**: Automatically truncates logs when they exceed 50,000 lines
- **File Size Monitoring**: Triggers cleanup when log files exceed 5MB
- **Memory Efficient Processing**: Processes logs line-by-line without loading entire files
- **Batch Data Transfer**: Uses rsync for efficient incremental uploads

### Key Components

#### process_dionaea.py
- **Purpose**: Core log processor with incremental updates and persistent storage
- **Key Features**: Hash deduplication, log rotation detection, GeoIP integration
- **Performance**: Processes 50,000+ log lines while maintaining sub-second response times

#### upload_honey_data.sh
- **Purpose**: Continuous automation script for processing and data transfer
- **Interval**: Processes logs every 15 seconds
- **Features**: Dependency checking, error handling, logging

#### Web Dashboard
- **Technology**: Vanilla JavaScript with Chart.js for visualizations
- **Features**: Real-time updates, interactive maps, responsive design
- **Performance**: Optimized for mobile devices with touch controls

### Data Structures

The system generates several JSON data files:

- **attacks.json**: Recent attack entries with full details
- **summary.json**: Aggregated statistics and top attackers
- **hourly_stats.json**: Time-based attack distribution
- **daily_stats.json**: Daily attack patterns
- **persistent_attacks.json**: Long-term attack storage surviving log rotations

> [!NOTE]  
> The persistent attack database ensures no data loss during Dionaea restarts or log rotations.

## Configuration

### Key Configuration Parameters

```bash
# upload_honey_data.sh
REMOTE_USER="username"
REMOTE_HOST="webserver.com"
REMOTE_PATH="/path/to/web/data/"
PROCESS_INTERVAL=15  # seconds
```

```python
# process_dionaea.py
log_path='/opt/dionaea/var/log/dionaea/dionaea.log'
output_dir='/tmp/honeypot_data'
max_log_lines=50000  # Keep last 50K lines
max_file_size=5000000  # 5MB limit
```

## Security Considerations

> [!CAUTION]
> This system will attract real malicious traffic. Implement proper security measures:

- Network isolation for the honeypot server
- Regular security updates for both servers
- Proper SSH key management
- Firewall rules restricting unnecessary access
- Regular backup of attack data

> [!WARNING]  
> Never expose the honeypot server directly to the internet without proper isolation.

## Performance Considerations

- **Hardware Efficiency**: Runs seamlessly on Raspberry Pi 3B with only 1GB RAM, demonstrating optimized resource management
- **Log Processing**: Handles 1000+ attacks per minute without performance degradation
- **Memory Usage**: Maintains constant memory footprint through incremental processing and intelligent caching
- **Storage**: Automatically manages log file sizes to prevent disk space issues
- **Network**: Efficient rsync transfers minimize bandwidth usage
- **Resource Optimization**: Line-by-line processing ensures minimal RAM consumption even on constrained hardware

## Monitoring and Maintenance

### System Health Checks

The dashboard provides real-time status indicators:
- Honeypot connectivity status
- Last data update timestamp
- Processing queue status
- Attack frequency monitoring

### Log Management

- Automatic log rotation handling
- Configurable line limits for performance
- Backup and recovery mechanisms
- Hash-based duplicate prevention

> [!TIP]
> Monitor the persistent attack database size regularly. It grows with attack volume and may require periodic cleanup.

## Troubleshooting

### Common Issues

1. **No Data Updates**: Check SSH connectivity and permissions
2. **High Memory Usage**: Reduce max_log_lines parameter
3. **Missing Attacks**: Verify Dionaea is running and logging properly
4. **Dashboard Not Loading**: Check web server configuration and file permissions

### Debug Mode

Enable verbose logging for troubleshooting:
```bash
python3 process_dionaea.py --verbose
```

> [!NOTE]  
> Verbose mode provides detailed information about processing steps and potential issues.

## Build System

This portfolio project demonstrates production automation practices:

- Systemd service integration for daemon management
- Automated data processing with error recovery
- Efficient incremental file synchronization using rsync

## Known Limitations

> [!WARNING]  
> The system assumes specific Dionaea log formats. Changes to Dionaea configuration may require log parsing updates.

> [!IMPORTANT]
> - SSH key authentication must be properly configured
- GeoIP database requires periodic updates for accuracy
- Large attack volumes may require storage management

## Future Improvements

- Enhanced machine learning attack classification
- Advanced threat intelligence integration
- Automated response capabilities
- Extended retention policies
- API endpoints for external integration

## License and Disclaimer

> [!CAUTION]
> This software is for educational and research purposes. Users are responsible for complying with local laws and regulations regarding honeypot deployment.

> [!NOTE]  
> This project is designed for cybersecurity research and should only be deployed in controlled environments with proper authorization.

## Portfolio Highlights

This project demonstrates proficiency in:

**Backend Development:**
- Python log processing with advanced algorithms
- Incremental data processing and performance optimization
- Hash-based deduplication and caching mechanisms
- File I/O optimization and memory management

**System Administration:**
- Linux system configuration and service management
- SSH automation and secure data transfer
- Network security and isolation techniques
- Process monitoring and error handling
- Resource-efficient system design for embedded hardware (Raspberry Pi 3B/1GB RAM)

**Frontend Development:**
- Vanilla JavaScript with real-time data visualization
- Responsive web design with mobile optimization
- Chart.js integration for statistical displays
- Interactive geographic mapping with SVG manipulation

**DevOps Practices:**
- Automated deployment and service management
- Continuous data processing pipelines
- Error logging and system monitoring
- Cross-server automation and orchestration

> [!NOTE]  
> This project showcases real-world cybersecurity infrastructure and demonstrates enterprise-level system design principles.
